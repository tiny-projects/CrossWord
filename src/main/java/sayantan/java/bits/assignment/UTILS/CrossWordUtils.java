package sayantan.java.bits.assignment.UTILS;

import java.io.InputStream;

public class CrossWordUtils {
	public static int countLinesNew(InputStream is) throws Exception {

		try {
			byte[] c = new byte[1024];

			int readChars = is.read(c);
			if (readChars == -1) {
				// bail out if nothing to read
				return 0;
			}

			// make it easy for the optimizer to tune this loop
			int count = 0;
			while (readChars == 1024) {
				for (int i = 0; i < 1024;) {
					if (c[i++] == '\n') {
						++count;
					}
				}
				readChars = is.read(c);
			}

			// count remaining characters
			while (readChars != -1) {
				System.out.println(readChars);
				for (int i = 0; i < readChars; ++i) {
					if (c[i] == '\n') {
						++count;
					}
				}
				readChars = is.read(c);
			}

			return count == 0 ? 1 : count;
		} catch (Exception e) {
			System.out.println("****[ERROR] " + e.getMessage());
			is.close();
			throw new Exception(e);
		}
	}
}
